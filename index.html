<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ñ–ò–ú 100 –ö–ì ‚Äî –¢—Ä–µ–Ω—É–≤–∞–ª—å–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        :root {
            --bg: #fafafa;
            --bg-card: #ffffff;
            --bg-input: #f5f5f5;
            --text: #1a1a1a;
            --text-secondary: #666666;
            --text-muted: #999999;
            --border: #e5e5e5;
            --accent: #e63946;
            --accent-light: rgba(230, 57, 70, 0.08);
            --warmup: #2a9d8f;
            --warmup-bg: rgba(42, 157, 143, 0.06);
            --weight-bg: rgba(230, 57, 70, 0.1);
            --shadow: 0 1px 3px rgba(0,0,0,0.04);
        }

        [data-theme="dark"] {
            --bg: #0d0d0d;
            --bg-card: #161616;
            --bg-input: #1f1f1f;
            --text: #f0f0f0;
            --text-secondary: #a0a0a0;
            --text-muted: #666666;
            --border: #2a2a2a;
            --accent: #e63946;
            --accent-light: rgba(230, 57, 70, 0.12);
            --warmup: #2a9d8f;
            --warmup-bg: rgba(42, 157, 143, 0.1);
            --weight-bg: rgba(230, 57, 70, 0.15);
            --shadow: none;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'DM Sans', -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.5;
            transition: background 0.3s, color 0.3s;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 2.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border);
        }

        .header-content h1 {
            font-size: 1.75rem;
            font-weight: 700;
            letter-spacing: -0.5px;
            margin-bottom: 0.25rem;
        }

        .header-content p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .theme-toggle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid var(--border);
            background: var(--bg-card);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            transition: all 0.2s;
        }

        .theme-toggle:hover {
            border-color: var(--accent);
        }

        .header-controls {
            display: flex;
            gap: 0.5rem;
        }

        .theme-toggle#langIcon,
        #langIcon {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .config-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }

        .config-section h2 {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
            margin-bottom: 1rem;
        }

        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 1rem;
        }

        .config-item {
            display: flex;
            flex-direction: column;
            gap: 0.35rem;
        }

        .config-item.primary {
            grid-column: 1 / -1;
        }

        .config-item label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .config-item .input-wrap {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .config-item input {
            width: 100%;
            padding: 0.6rem 0.75rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1rem;
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            transition: border-color 0.2s;
        }

        .config-item.primary input {
            font-size: 1.5rem;
            padding: 0.75rem 1rem;
            font-weight: 600;
        }

        .config-item input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .config-item input[type="date"] {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.95rem;
            cursor: pointer;
        }

        .config-item input[type="date"]::-webkit-calendar-picker-indicator {
            filter: invert(0.5);
            cursor: pointer;
        }

        [data-theme="dark"] .config-item input[type="date"]::-webkit-calendar-picker-indicator {
            filter: invert(0.7);
        }

        .config-item .unit {
            font-size: 0.85rem;
            color: var(--text-muted);
            flex-shrink: 0;
        }

        .legend-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.25rem 1.5rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }

        .legend-title {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
            margin-bottom: 1rem;
        }

        .legend-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 0.75rem;
        }

        .legend-item {
            display: flex;
            align-items: flex-start;
            gap: 0.6rem;
        }

        .legend-badge {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            font-weight: 600;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            background: var(--bg-input);
            border: 1px solid var(--border);
            flex-shrink: 0;
            min-width: 45px;
            text-align: center;
        }

        .legend-text {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        .legend-text strong {
            color: var(--text);
            font-weight: 600;
        }

        .week-section {
            margin-bottom: 1.5rem;
            page-break-inside: avoid;
        }

        .week-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: var(--shadow);
            user-select: none;
        }

        .week-header:hover {
            border-color: var(--accent);
        }

        .week-header h2 {
            font-size: 1rem;
            font-weight: 600;
        }

        .toggle-icon {
            font-size: 1.25rem;
            color: var(--text-muted);
            transition: transform 0.3s;
        }

        .week-section.collapsed .week-header .toggle-icon,
        .day-section.collapsed .day-header .toggle-icon {
            transform: rotate(-90deg);
        }

        .week-section.collapsed .week-content {
            display: none;
        }

        .week-content {
            margin-top: 0.5rem;
        }

        .day-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 10px;
            margin-bottom: 0.5rem;
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        .day-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            cursor: pointer;
            user-select: none;
            transition: background 0.2s;
        }

        .day-header:hover {
            background: var(--bg-input);
        }

        .day-number {
            width: 28px;
            height: 28px;
            background: var(--accent);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: 600;
            color: white;
            flex-shrink: 0;
        }

        .day-title {
            font-size: 0.95rem;
            font-weight: 500;
            flex: 1;
        }

        .day-content {
            padding: 0 1.25rem 1.25rem;
        }

        .day-section.collapsed .day-content {
            display: none;
        }

        .block {
            margin-bottom: 1rem;
        }

        .block:last-child {
            margin-bottom: 0;
        }

        .block-header {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .block.warmup .block-header,
        .block.cooldown .block-header {
            color: var(--warmup);
        }

        .warmup-list {
            list-style: none;
            padding: 0.75rem;
            background: var(--warmup-bg);
            border-radius: 8px;
        }

        .warmup-list li {
            padding: 0.25rem 0;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .warmup-list li + li {
            border-top: 1px solid var(--border);
            margin-top: 0.25rem;
            padding-top: 0.5rem;
        }

        .video-link {
            color: var(--text-secondary);
            text-decoration: none;
            border-bottom: 1px dashed var(--warmup);
            transition: color 0.2s, border-color 0.2s;
        }

        .video-link:hover {
            color: var(--warmup);
            border-bottom-style: solid;
        }

        .video-link::after {
            content: " ‚ñ∂";
            font-size: 0.7em;
            opacity: 0.6;
        }

        .exercise-table {
            width: 100%;
            border-collapse: collapse;
        }

        .exercise-table th {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
            font-weight: 500;
            text-align: left;
            padding: 0.5rem 0.25rem;
            border-bottom: 1px solid var(--border);
        }

        .exercise-table th:last-child {
            text-align: center;
        }

        .exercise-table td {
            padding: 0.6rem 0.25rem;
            vertical-align: middle;
            border-bottom: 1px solid var(--border);
        }

        .exercise-table tr:last-child td {
            border-bottom: none;
        }

        .exercise-table .col-num {
            width: 30px;
        }

        .exercise-table .col-name {
            width: auto;
        }

        .exercise-table .col-sets {
            width: 110px;
        }

        .exercise-table .col-weight {
            width: 160px;
        }

        .exercise-table .col-result {
            width: 80px;
        }

        .exercise-num {
            width: 24px;
            height: 24px;
            background: var(--accent-light);
            color: var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .exercise-name {
            font-size: 0.9rem;
        }

        .sets-reps {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .weight-info {
            display: flex;
            flex-direction: column;
            gap: 0.15rem;
        }

        .weight-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--accent);
        }

        .weight-meta {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        .weight-empty {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .result-input {
            width: 100%;
            padding: 0.3rem 0.4rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            background: var(--bg-input);
            border: 1px dashed var(--border);
            border-radius: 4px;
            color: var(--text);
            text-align: center;
        }

        .result-input:focus {
            outline: none;
            border-style: solid;
            border-color: var(--accent);
        }

        .result-input::placeholder {
            color: var(--text-muted);
        }

        .user-weight-input {
            width: 100%;
            padding: 0.25rem 0.4rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: 5px;
            color: var(--text);
            text-align: center;
        }

        .user-weight-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .save-section {
            text-align: center;
            padding: 2rem 1rem;
            margin-top: 1rem;
        }

        .save-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 0.85rem 2rem;
            font-family: 'DM Sans', sans-serif;
            font-size: 0.95rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .save-btn:hover {
            opacity: 0.9;
        }

        .save-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .save-options {
            margin-bottom: 1rem;
        }

        .checkbox-label {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .checkbox-label input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--accent);
            cursor: pointer;
        }

        /* Compact PDF mode */
        .compact-pdf .block.warmup,
        .compact-pdf .block.cooldown {
            display: none !important;
        }

        .compact-pdf .day-content {
            padding-top: 0.5rem;
        }

        .compact-pdf .day-section {
            margin-bottom: 0.25rem;
        }

        .compact-pdf .week-content {
            margin-top: 0.25rem;
        }

        .compact-pdf .week-section {
            margin-bottom: 1rem;
        }

        .compact-pdf .exercise-table td,
        .compact-pdf .exercise-table th {
            padding: 0.4rem 0.25rem;
            font-size: 0.85rem;
        }

        .compact-pdf .weight-value {
            font-size: 0.8rem;
        }

        .compact-pdf .weight-meta {
            font-size: 0.65rem;
        }

        .compact-pdf .legend-section {
            display: none;
        }

        .note {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 0.75rem;
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .loading-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .loading-spinner {
            text-align: center;
            color: white;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255,255,255,0.2);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @media print {
            .config-section, .save-section, .header-controls {
                display: none !important;
            }
            .week-section.collapsed .week-content,
            .day-section.collapsed .day-content {
                display: block !important;
            }
            .result-input {
                border-style: solid;
                border-color: var(--border);
            }
            .video-link {
                color: inherit;
                border-bottom: none;
            }
            .video-link::after {
                display: none;
            }
        }

        @media (max-width: 700px) {
            .container { padding: 1rem; }
            .config-grid {
                grid-template-columns: 1fr 1fr;
            }
            .exercise-table .col-weight {
                width: 120px;
            }
            .exercise-table .col-result {
                width: 55px;
            }
            .weight-meta {
                font-size: 0.6rem;
            }
            .weight-value {
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>–ì–µ–Ω–µ—Ä—É—é PDF...</p>
        </div>
    </div>

    <div class="container" id="mainContainer">
        <header>
            <div class="header-content">
                <h1>–ñ–ò–ú 100 –ö–ì</h1>
                <p>–¢—Ä–µ–Ω—É–≤–∞–ª—å–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ ¬∑ –î–º–∏—Ç—Ä–æ –ì–æ–ª–æ–≤–∏–Ω—Å—å–∫–∏–π</p>
            </div>
            <div class="header-controls">
                <button class="theme-toggle" onclick="toggleLanguage()" title="Switch language">
                    <span id="langIcon">EN</span>
                </button>
                <button class="theme-toggle" onclick="toggleTheme()" title="–ó–º—ñ–Ω–∏—Ç–∏ —Ç–µ–º—É">
                    <span id="themeIcon">üåô</span>
                </button>
            </div>
        </header>

        <section class="config-section" id="configSection">
            <h2>–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</h2>
            <div class="config-grid">
                <div class="config-item primary">
                    <label>–†–∞–∑–æ–≤–∏–π –º–∞–∫—Å–∏–º—É–º —É –∂–∏–º—ñ –ª–µ–∂–∞—á–∏</label>
                    <div class="input-wrap">
                        <input type="number" id="oneRepMax" value="100" min="20" max="150" step="2.5">
                        <span class="unit">–∫–≥</span>
                    </div>
                </div>
                <div class="config-item">
                    <label>–ë—ñ—Ü–µ–ø—Å —Å—Ç–æ—è—á–∏</label>
                    <div class="input-wrap">
                        <input type="number" id="coef_biceps" value="35" min="10" max="100" step="1">
                        <span class="unit">% –≤—ñ–¥ 1RM</span>
                    </div>
                </div>
                <div class="config-item">
                    <label>–ñ–∏–º –≥–∞–Ω—Ç–µ–ª—å –ø–æ—Ö–∏–ª–æ</label>
                    <div class="input-wrap">
                        <input type="number" id="coef_incline" value="32" min="10" max="100" step="1">
                        <span class="unit">%</span>
                    </div>
                </div>
                <div class="config-item">
                    <label>–ñ–∏–º —Å—Ç–æ—è—á–∏</label>
                    <div class="input-wrap">
                        <input type="number" id="coef_ohp" value="60" min="20" max="100" step="1">
                        <span class="unit">%</span>
                    </div>
                </div>
                <div class="config-item">
                    <label>–ñ–∏–º –≤—É–∑—å–∫–∏–º</label>
                    <div class="input-wrap">
                        <input type="number" id="coef_close_grip" value="85" min="30" max="100" step="1">
                        <span class="unit">%</span>
                    </div>
                </div>
                <div class="config-item">
                    <label>–î–∞—Ç–∞ –ø–æ—á–∞—Ç–∫—É (–ø–æ–Ω–µ–¥—ñ–ª–æ–∫)</label>
                    <div class="input-wrap">
                        <input type="date" id="startDate">
                    </div>
                </div>
            </div>
        </section>

        <div class="legend-section">
            <div class="legend-title">–£–º–æ–≤–Ω—ñ –ø–æ–∑–Ω–∞—á–µ–Ω–Ω—è</div>
            <div class="legend-grid">
                <div class="legend-item">
                    <span class="legend-badge">–õ–í</span>
                    <span class="legend-text"><strong>–õ–µ–≥–∫–∞ –≤–∞–≥–∞</strong> ‚Äî 40-55% –≤—ñ–¥ 1RM, –∑–∞–ø–∞—Å 8+ –ø–æ–≤—Ç–æ—Ä—ñ–≤</span>
                </div>
                <div class="legend-item">
                    <span class="legend-badge">–°–í</span>
                    <span class="legend-text"><strong>–°–µ—Ä–µ–¥–Ω—è –≤–∞–≥–∞</strong> ‚Äî 50-60% –≤—ñ–¥ 1RM, –∑–∞–ø–∞—Å 5-6 –ø–æ–≤—Ç–æ—Ä—ñ–≤</span>
                </div>
                <div class="legend-item">
                    <span class="legend-badge">–í–í</span>
                    <span class="legend-text"><strong>–í–∞–∂–∫–∞ –≤–∞–≥–∞</strong> ‚Äî 70-85% –≤—ñ–¥ 1RM, –∑–∞–ø–∞—Å 1-2 –ø–æ–≤—Ç–æ—Ä–∏</span>
                </div>
                <div class="legend-item">
                    <span class="legend-badge">–ú–í</span>
                    <span class="legend-text"><strong>–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –≤–∞–≥–∞</strong> ‚Äî –ª–µ–¥—å –≤—ñ–¥—á—É–≤–∞—î—Ç—å—Å—è –∞–±–æ –±–µ–∑ –≤–∞–≥–∏</span>
                </div>
                <div class="legend-item">
                    <span class="legend-badge">–•√ó–£</span>
                    <span class="legend-text"><strong>–• –ø–æ –£</strong> ‚Äî –• –ø—ñ–¥—Ö–æ–¥—ñ–≤ –ø–æ –£ –ø–æ–≤—Ç–æ—Ä–µ–Ω—å</span>
                </div>
                <div class="legend-item">
                    <span class="legend-badge">‚Üó</span>
                    <span class="legend-text"><strong>–ó—ñ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è–º –≤–∞–≥–∏</strong> ‚Äî –≤—ñ–¥ –ª–µ–≥–∫–æ—ó –¥–æ –≤–∞–∂–∫–æ—ó (–∑–∞–ø–∞—Å 1-2)</span>
                </div>
                <div class="legend-item">
                    <span class="legend-badge">‚Üí</span>
                    <span class="legend-text"><strong>–ü–æ —Ä–∞–∑—É –≤ –≥–æ—Ä—É</strong> ‚Äî –ø—ñ–¥—Ö–æ–¥–∏ –Ω–∞ 1 –ø–æ–≤—Ç–æ—Ä –¥–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó</span>
                </div>
                <div class="legend-item">
                    <span class="legend-badge">—Å—ñ–Ω–≥–ª–∏</span>
                    <span class="legend-text"><strong>–°—ñ–Ω–≥–ª–∏</strong> ‚Äî 1 –ø–æ–≤—Ç–æ—Ä–µ–Ω–Ω—è –∑ –ø–∞—É–∑–æ—é –Ω–∞ –≥—Ä—É–¥—è—Ö</span>
                </div>
            </div>
        </div>

        <div id="programContent"></div>

        <section class="save-section" id="saveSection">
            <div class="save-options">
                <label class="checkbox-label">
                    <input type="checkbox" id="compactPdf" checked>
                    <span>–ö–æ–º–ø–∞–∫—Ç–Ω–∏–π PDF (–±–µ–∑ —Ä–æ–∑–º–∏–Ω–∫–∏/–∑–∞–º–∏–Ω–∫–∏)</span>
                </label>
            </div>
            <button class="save-btn" id="saveBtn" onclick="savePDF()">–ó–±–µ—Ä–µ–≥—Ç–∏ —è–∫ PDF</button>
            <p class="note">–ó–∞–æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è –¥–æ 2.5 –∫–≥ –¥–ª—è —à—Ç–∞–Ω–≥–∏</p>
        </section>
    </div>

    <script>
        // Date management
        function getNextMonday() {
            const today = new Date();
            const dayOfWeek = today.getDay();
            const daysUntilMonday = dayOfWeek === 0 ? 1 : (8 - dayOfWeek);
            const nextMonday = new Date(today);
            nextMonday.setDate(today.getDate() + daysUntilMonday);
            return nextMonday;
        }

        function formatDateForInput(date) {
            return date.toISOString().split('T')[0];
        }

        function formatDateDisplay(date) {
            const options = { day: 'numeric', month: 'short' };
            const locale = currentLang === 'uk' ? 'uk-UA' : 'en-US';
            return date.toLocaleDateString(locale, options);
        }

        function getTrainingDates(startDate) {
            const dates = [];
            const start = new Date(startDate);
            
            for (let week = 0; week < 4; week++) {
                const weekDates = [];
                // Monday
                const monday = new Date(start);
                monday.setDate(start.getDate() + (week * 7));
                weekDates.push(new Date(monday));
                
                // Wednesday
                const wednesday = new Date(monday);
                wednesday.setDate(monday.getDate() + 2);
                weekDates.push(new Date(wednesday));
                
                // Friday
                const friday = new Date(monday);
                friday.setDate(monday.getDate() + 4);
                weekDates.push(new Date(friday));
                
                dates.push(weekDates);
            }
            return dates;
        }

        function initStartDate() {
            const startDateInput = document.getElementById('startDate');
            if (!startDateInput.value) {
                const nextMonday = getNextMonday();
                startDateInput.value = formatDateForInput(nextMonday);
            }
        }

        // Theme management
        function toggleTheme() {
            const body = document.body;
            const icon = document.getElementById('themeIcon');
            const isDark = body.getAttribute('data-theme') === 'dark';
            
            if (isDark) {
                body.removeAttribute('data-theme');
                icon.textContent = 'üåô';
                localStorage.setItem('theme', 'light');
            } else {
                body.setAttribute('data-theme', 'dark');
                icon.textContent = '‚òÄÔ∏è';
                localStorage.setItem('theme', 'dark');
            }
        }

        // Load saved theme
        (function() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.setAttribute('data-theme', 'dark');
                document.getElementById('themeIcon').textContent = '‚òÄÔ∏è';
            }
        })();

        // Translations
        const translations = {
            uk: {
                title: '–ñ–ò–ú 100 –ö–ì ‚Äî –¢—Ä–µ–Ω—É–≤–∞–ª—å–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞',
                headerTitle: '–ñ–ò–ú 100 –ö–ì',
                headerSubtitle: '–¢—Ä–µ–Ω—É–≤–∞–ª—å–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ ¬∑ –î–º–∏—Ç—Ä–æ –ì–æ–ª–æ–≤–∏–Ω—Å—å–∫–∏–π',
                settings: '–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è',
                oneRepMaxLabel: '–†–∞–∑–æ–≤–∏–π –º–∞–∫—Å–∏–º—É–º —É –∂–∏–º—ñ –ª–µ–∂–∞—á–∏',
                bicepsLabel: '–ë—ñ—Ü–µ–ø—Å —Å—Ç–æ—è—á–∏',
                inclineLabel: '–ñ–∏–º –≥–∞–Ω—Ç–µ–ª—å –ø–æ—Ö–∏–ª–æ',
                ohpLabel: '–ñ–∏–º —Å—Ç–æ—è—á–∏',
                closeGripLabel: '–ñ–∏–º –≤—É–∑—å–∫–∏–º',
                startDateLabel: '–î–∞—Ç–∞ –ø–æ—á–∞—Ç–∫—É (–ø–æ–Ω–µ–¥—ñ–ª–æ–∫)',
                legendTitle: '–£–º–æ–≤–Ω—ñ –ø–æ–∑–Ω–∞—á–µ–Ω–Ω—è',
                legendLV: '<strong>–õ–µ–≥–∫–∞ –≤–∞–≥–∞</strong> ‚Äî 40-55% –≤—ñ–¥ 1RM, –∑–∞–ø–∞—Å 8+ –ø–æ–≤—Ç–æ—Ä—ñ–≤',
                legendSV: '<strong>–°–µ—Ä–µ–¥–Ω—è –≤–∞–≥–∞</strong> ‚Äî 50-60% –≤—ñ–¥ 1RM, –∑–∞–ø–∞—Å 5-6 –ø–æ–≤—Ç–æ—Ä—ñ–≤',
                legendVV: '<strong>–í–∞–∂–∫–∞ –≤–∞–≥–∞</strong> ‚Äî 70-85% –≤—ñ–¥ 1RM, –∑–∞–ø–∞—Å 1-2 –ø–æ–≤—Ç–æ—Ä–∏',
                legendMV: '<strong>–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –≤–∞–≥–∞</strong> ‚Äî –ª–µ–¥—å –≤—ñ–¥—á—É–≤–∞—î—Ç—å—Å—è –∞–±–æ –±–µ–∑ –≤–∞–≥–∏',
                legendXY: '<strong>–• –ø–æ –£</strong> ‚Äî –• –ø—ñ–¥—Ö–æ–¥—ñ–≤ –ø–æ –£ –ø–æ–≤—Ç–æ—Ä–µ–Ω—å',
                legendUp: '<strong>–ó—ñ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è–º –≤–∞–≥–∏</strong> ‚Äî –≤—ñ–¥ –ª–µ–≥–∫–æ—ó –¥–æ –≤–∞–∂–∫–æ—ó (–∑–∞–ø–∞—Å 1-2)',
                legendArrow: '<strong>–ü–æ —Ä–∞–∑—É –≤ –≥–æ—Ä—É</strong> ‚Äî –ø—ñ–¥—Ö–æ–¥–∏ –Ω–∞ 1 –ø–æ–≤—Ç–æ—Ä –¥–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó',
                legendSingles: '<strong>–°—ñ–Ω–≥–ª–∏</strong> ‚Äî 1 –ø–æ–≤—Ç–æ—Ä–µ–Ω–Ω—è –∑ –ø–∞—É–∑–æ—é –Ω–∞ –≥—Ä—É–¥—è—Ö',
                compactPdfLabel: '–ö–æ–º–ø–∞–∫—Ç–Ω–∏–π PDF (–±–µ–∑ —Ä–æ–∑–º–∏–Ω–∫–∏/–∑–∞–º–∏–Ω–∫–∏)',
                savePdfBtn: '–ó–±–µ—Ä–µ–≥—Ç–∏ —è–∫ PDF',
                saveNote: '–ó–∞–æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è –¥–æ 2.5 –∫–≥ –¥–ª—è —à—Ç–∞–Ω–≥–∏',
                generatingPdf: '–ì–µ–Ω–µ—Ä—É—é PDF...',
                warmup: '–†–æ–∑–º–∏–Ω–∫–∞',
                exercises: '–í–ø—Ä–∞–≤–∏',
                cooldown: '–ó–∞–º–∏–Ω–∫–∞',
                thExercise: '–í–ø—Ä–∞–≤–∞',
                thSets: '–ü—ñ–¥—Ö–æ–¥–∏',
                thWeight: '–í–∞–≥–∞',
                thResult: '–§–∞–∫—Ç',
                week1: '–¢–∏–∂–¥–µ–Ω—å I',
                week2: '–¢–∏–∂–¥–µ–Ω—å II',
                week3: '–¢–∏–∂–¥–µ–Ω—å III',
                week4: '–¢–∏–∂–¥–µ–Ω—å IV',
                unit1RM: '% –≤—ñ–¥ 1RM',
                unitPercent: '%',
                unitKg: '–∫–≥',
                dayLabels: ['–ü–Ω', '–°—Ä', '–ü—Ç'],
                // Exercise names
                ex: {
                    '–ñ–∏–º –ª–µ–∂–∞—á–∏': '–ñ–∏–º –ª–µ–∂–∞—á–∏',
                    '–ñ–∏–º –ª–µ–∂–∞—á–∏ (—Å—ñ–Ω–≥–ª–∏)': '–ñ–∏–º –ª–µ–∂–∞—á–∏ (—Å—ñ–Ω–≥–ª–∏)',
                    '–¢—è–≥–∞ –≤–µ—Ä—Ö–Ω—å–æ–≥–æ –±–ª–æ–∫—É –∑ –¥–µ–ø—Ä–µ—Å—ñ—î—é –ª–æ–ø–∞—Ç–∫–∏': '–¢—è–≥–∞ –≤–µ—Ä—Ö–Ω—å–æ–≥–æ –±–ª–æ–∫—É –∑ –¥–µ–ø—Ä–µ—Å—ñ—î—é –ª–æ–ø–∞—Ç–∫–∏',
                    '–®—Ä–∞–≥–∏ –∑ —Ä–µ—Ç—Ä–∞–∫—Ü—ñ—î—é –ª–æ–ø–∞—Ç–∫–∏': '–®—Ä–∞–≥–∏ –∑ —Ä–µ—Ç—Ä–∞–∫—Ü—ñ—î—é –ª–æ–ø–∞—Ç–∫–∏',
                    '–ë—ñ—Ü–µ–ø—Å —Å—Ç–æ—è—á–∏': '–ë—ñ—Ü–µ–ø—Å —Å—Ç–æ—è—á–∏',
                    '–ñ–∏–º –ê—Ä–Ω–æ–ª—å–¥–∞': '–ñ–∏–º –ê—Ä–Ω–æ–ª—å–¥–∞',
                    '–¢—è–≥–∞ –Ω–∏–∂–Ω—å–æ–≥–æ –±–ª–æ–∫—É –∑ —Ä–µ—Ç—Ä–∞–∫—Ü—ñ—î—é': '–¢—è–≥–∞ –Ω–∏–∂–Ω—å–æ–≥–æ –±–ª–æ–∫—É –∑ —Ä–µ—Ç—Ä–∞–∫—Ü—ñ—î—é',
                    '–¢—è–≥–∞ –Ω–∏–∂–Ω—å–æ–≥–æ –±–ª–æ–∫—É –∑ —Ä–µ—Ç—Ä–∞–∫—Ü—ñ—î—é –ª–æ–ø–∞—Ç–∫–∏': '–¢—è–≥–∞ –Ω–∏–∂–Ω—å–æ–≥–æ –±–ª–æ–∫—É –∑ —Ä–µ—Ç—Ä–∞–∫—Ü—ñ—î—é –ª–æ–ø–∞—Ç–∫–∏',
                    '–ñ–∏–º –≤—É–∑—å–∫–∏–º —Ö–≤–∞—Ç–æ–º': '–ñ–∏–º –≤—É–∑—å–∫–∏–º —Ö–≤–∞—Ç–æ–º',
                    '–ú–æ–ª–æ—Ç–∫–æ–≤—ñ –∑–≥–∏–Ω–∞–Ω–Ω—è': '–ú–æ–ª–æ—Ç–∫–æ–≤—ñ –∑–≥–∏–Ω–∞–Ω–Ω—è',
                    '–ñ–∏–º –≥–∞–Ω—Ç–µ–ª—å –Ω–∞ –ø–æ—Ö–∏–ª—ñ–π –ª–∞–≤—Ü—ñ': '–ñ–∏–º –≥–∞–Ω—Ç–µ–ª—å –Ω–∞ –ø–æ—Ö–∏–ª—ñ–π –ª–∞–≤—Ü—ñ',
                    '–ú–∞—Ö–∏ –Ω–∞ —Å–µ—Ä–µ–¥–Ω—é –¥–µ–ª—å—Ç—É': '–ú–∞—Ö–∏ –Ω–∞ —Å–µ—Ä–µ–¥–Ω—é –¥–µ–ª—å—Ç—É',
                    '–ú–∞—Ö–∏ –Ω–∞ –∑–∞–¥–Ω—é –¥–µ–ª—å—Ç—É': '–ú–∞—Ö–∏ –Ω–∞ –∑–∞–¥–Ω—é –¥–µ–ª—å—Ç—É',
                    '–ñ–∏–º —Å—Ç–æ—è—á–∏': '–ñ–∏–º —Å—Ç–æ—è—á–∏',
                    '–†–æ–∑–≥–∏–Ω–∞–Ω–Ω—è —ñ–∑-–∑–∞ –≥–æ–ª–æ–≤–∏': '–†–æ–∑–≥–∏–Ω–∞–Ω–Ω—è —ñ–∑-–∑–∞ –≥–æ–ª–æ–≤–∏',
                    '–í—ñ–¥—Ç–∏—Å–∫–∞–Ω–Ω—è –Ω–∞ –±—Ä—É—Å–∞—Ö': '–í—ñ–¥—Ç–∏—Å–∫–∞–Ω–Ω—è –Ω–∞ –±—Ä—É—Å–∞—Ö',
                    '–¢—è–≥–∞ –≤–µ—Ä—Ö–Ω—å–æ–≥–æ –±–ª–æ–∫—É –∑ –¥–µ–ø—Ä–µ—Å—ñ—î—é': '–¢—è–≥–∞ –≤–µ—Ä—Ö–Ω—å–æ–≥–æ –±–ª–æ–∫—É –∑ –¥–µ–ø—Ä–µ—Å—ñ—î—é',
                    '–ü—É–ª–æ–≤–µ—Ä —á–µ—Ä–µ–∑ –ª–∞–≤–∫—É': '–ü—É–ª–æ–≤–µ—Ä —á–µ—Ä–µ–∑ –ª–∞–≤–∫—É',
                    '–ø–æ 1 –≤ –≥–æ—Ä—É –¥–æ –≤–∞–∂–∫–æ–≥–æ': '–ø–æ 1 –≤ –≥–æ—Ä—É –¥–æ –≤–∞–∂–∫–æ–≥–æ'
                },
                // Warmup/cooldown items
                warmupItems: {
                    '–ó–∞–≥–∞–ª—å–Ω–∞ —Ä–æ–∑–º–∏–Ω–∫–∞, –∫–∞—Ä–¥—ñ–æ 10 —Ö–≤': '–ó–∞–≥–∞–ª—å–Ω–∞ —Ä–æ–∑–º–∏–Ω–∫–∞, –∫–∞—Ä–¥—ñ–æ 10 —Ö–≤',
                    '–ü—ñ–¥–π–æ–º –ø—Ä—è–º–∏—Ö —Ä—É–∫ –¥–æ –≥–æ—Ä–∏ 3√ó10': '–ü—ñ–¥–π–æ–º –ø—Ä—è–º–∏—Ö —Ä—É–∫ –¥–æ –≥–æ—Ä–∏ 3√ó10',
                    '–ü—ñ–¥–π–æ–º –ø—Ä—è–º–∏—Ö —Ä—É–∫ —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä–æ–Ω–∏ 3√ó10': '–ü—ñ–¥–π–æ–º –ø—Ä—è–º–∏—Ö —Ä—É–∫ —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä–æ–Ω–∏ 3√ó10',
                    '–°—Ç–∞—Ç–∏—á–Ω–µ —É—Ç—Ä–∏–º–∞–Ω–Ω—è –∑ —É–ø–æ—Ä–æ–º –≤ —Å—Ç—ñ–Ω—É 2√ó10—Å –Ω–∞ —Ä—É–∫—É': '–°—Ç–∞—Ç–∏—á–Ω–µ —É—Ç—Ä–∏–º–∞–Ω–Ω—è –∑ —É–ø–æ—Ä–æ–º –≤ —Å—Ç—ñ–Ω—É 2√ó10—Å –Ω–∞ —Ä—É–∫—É',
                    '–°—Ç–∞—Ç–∏—á–Ω–µ —É—Ç—Ä–∏–º–∞–Ω–Ω—è –±–æ–∫–æ–º 2√ó10—Å –Ω–∞ —Ä—É–∫—É': '–°—Ç–∞—Ç–∏—á–Ω–µ —É—Ç—Ä–∏–º–∞–Ω–Ω—è –±–æ–∫–æ–º 2√ó10—Å –Ω–∞ —Ä—É–∫—É'
                }
            },
            en: {
                title: 'BENCH PRESS 100 KG ‚Äî Training Program',
                headerTitle: 'BENCH PRESS 100 KG',
                headerSubtitle: 'Training Program ¬∑ Dmytro Holovynskyi',
                settings: 'Settings',
                oneRepMaxLabel: 'Bench press one-rep max',
                bicepsLabel: 'Standing bicep curl',
                inclineLabel: 'Incline dumbbell press',
                ohpLabel: 'Overhead press',
                closeGripLabel: 'Close grip press',
                startDateLabel: 'Start date (Monday)',
                legendTitle: 'Legend',
                legendLV: '<strong>Light weight</strong> ‚Äî 40-55% of 1RM, 8+ reps in reserve',
                legendSV: '<strong>Medium weight</strong> ‚Äî 50-60% of 1RM, 5-6 reps in reserve',
                legendVV: '<strong>Heavy weight</strong> ‚Äî 70-85% of 1RM, 1-2 reps in reserve',
                legendMV: '<strong>Minimal weight</strong> ‚Äî barely noticeable or bodyweight',
                legendXY: '<strong>X by Y</strong> ‚Äî X sets of Y reps',
                legendUp: '<strong>Ascending weight</strong> ‚Äî from light to heavy (1-2 in reserve)',
                legendArrow: '<strong>Singles up</strong> ‚Äî single rep sets up to max',
                legendSingles: '<strong>Singles</strong> ‚Äî 1 rep with pause on chest',
                compactPdfLabel: 'Compact PDF (no warmup/cooldown)',
                savePdfBtn: 'Save as PDF',
                saveNote: 'Rounded to 2.5 kg for barbell',
                generatingPdf: 'Generating PDF...',
                warmup: 'Warm-up',
                exercises: 'Exercises',
                cooldown: 'Cool-down',
                thExercise: 'Exercise',
                thSets: 'Sets',
                thWeight: 'Weight',
                thResult: 'Actual',
                week1: 'Week I',
                week2: 'Week II',
                week3: 'Week III',
                week4: 'Week IV',
                unit1RM: '% of 1RM',
                unitPercent: '%',
                unitKg: 'kg',
                dayLabels: ['Mon', 'Wed', 'Fri'],
                // Exercise names
                ex: {
                    '–ñ–∏–º –ª–µ–∂–∞—á–∏': 'Bench press',
                    '–ñ–∏–º –ª–µ–∂–∞—á–∏ (—Å—ñ–Ω–≥–ª–∏)': 'Bench press (singles)',
                    '–¢—è–≥–∞ –≤–µ—Ä—Ö–Ω—å–æ–≥–æ –±–ª–æ–∫—É –∑ –¥–µ–ø—Ä–µ—Å—ñ—î—é –ª–æ–ø–∞—Ç–∫–∏': 'Lat pulldown with scapula depression',
                    '–®—Ä–∞–≥–∏ –∑ —Ä–µ—Ç—Ä–∞–∫—Ü—ñ—î—é –ª–æ–ø–∞—Ç–∫–∏': 'Shrugs with scapula retraction',
                    '–ë—ñ—Ü–µ–ø—Å —Å—Ç–æ—è—á–∏': 'Standing bicep curl',
                    '–ñ–∏–º –ê—Ä–Ω–æ–ª—å–¥–∞': 'Arnold press',
                    '–¢—è–≥–∞ –Ω–∏–∂–Ω—å–æ–≥–æ –±–ª–æ–∫—É –∑ —Ä–µ—Ç—Ä–∞–∫—Ü—ñ—î—é': 'Seated cable row with retraction',
                    '–¢—è–≥–∞ –Ω–∏–∂–Ω—å–æ–≥–æ –±–ª–æ–∫—É –∑ —Ä–µ—Ç—Ä–∞–∫—Ü—ñ—î—é –ª–æ–ø–∞—Ç–∫–∏': 'Seated cable row with scapula retraction',
                    '–ñ–∏–º –≤—É–∑—å–∫–∏–º —Ö–≤–∞—Ç–æ–º': 'Close grip bench press',
                    '–ú–æ–ª–æ—Ç–∫–æ–≤—ñ –∑–≥–∏–Ω–∞–Ω–Ω—è': 'Hammer curls',
                    '–ñ–∏–º –≥–∞–Ω—Ç–µ–ª—å –Ω–∞ –ø–æ—Ö–∏–ª—ñ–π –ª–∞–≤—Ü—ñ': 'Incline dumbbell press',
                    '–ú–∞—Ö–∏ –Ω–∞ —Å–µ—Ä–µ–¥–Ω—é –¥–µ–ª—å—Ç—É': 'Lateral raises',
                    '–ú–∞—Ö–∏ –Ω–∞ –∑–∞–¥–Ω—é –¥–µ–ª—å—Ç—É': 'Rear delt flyes',
                    '–ñ–∏–º —Å—Ç–æ—è—á–∏': 'Overhead press',
                    '–†–æ–∑–≥–∏–Ω–∞–Ω–Ω—è —ñ–∑-–∑–∞ –≥–æ–ª–æ–≤–∏': 'Overhead tricep extension',
                    '–í—ñ–¥—Ç–∏—Å–∫–∞–Ω–Ω—è –Ω–∞ –±—Ä—É—Å–∞—Ö': 'Dips',
                    '–¢—è–≥–∞ –≤–µ—Ä—Ö–Ω—å–æ–≥–æ –±–ª–æ–∫—É –∑ –¥–µ–ø—Ä–µ—Å—ñ—î—é': 'Lat pulldown with depression',
                    '–ü—É–ª–æ–≤–µ—Ä —á–µ—Ä–µ–∑ –ª–∞–≤–∫—É': 'Dumbbell pullover',
                    '–ø–æ 1 –≤ –≥–æ—Ä—É –¥–æ –≤–∞–∂–∫–æ–≥–æ': 'singles up to heavy'
                },
                // Warmup/cooldown items translations
                warmupItems: {
                    '–ó–∞–≥–∞–ª—å–Ω–∞ —Ä–æ–∑–º–∏–Ω–∫–∞, –∫–∞—Ä–¥—ñ–æ 10 —Ö–≤': 'General warmup, 10 min cardio',
                    '–ü—ñ–¥–π–æ–º –ø—Ä—è–º–∏—Ö —Ä—É–∫ –¥–æ –≥–æ—Ä–∏ 3√ó10': 'Front arm raises 3√ó10',
                    '–ü—ñ–¥–π–æ–º –ø—Ä—è–º–∏—Ö —Ä—É–∫ –¥–æ –≥–æ—Ä–∏ 3√ó12': 'Front arm raises 3√ó12',
                    '–ü—ñ–¥–π–æ–º –ø—Ä—è–º–∏—Ö —Ä—É–∫ —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä–æ–Ω–∏ 3√ó10': 'Lateral arm raises 3√ó10',
                    '–ü—ñ–¥–π–æ–º –ø—Ä—è–º–∏—Ö —Ä—É–∫ —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä–æ–Ω–∏ 3√ó12': 'Lateral arm raises 3√ó12',
                    '–°—Ç–∞—Ç–∏—á–Ω–µ —É—Ç—Ä–∏–º–∞–Ω–Ω—è –∑ —É–ø–æ—Ä–æ–º –≤ —Å—Ç—ñ–Ω—É 2√ó10—Å –Ω–∞ —Ä—É–∫—É': 'Wall push static hold 2√ó10s per arm',
                    '–°—Ç–∞—Ç–∏—á–Ω–µ —É—Ç—Ä–∏–º–∞–Ω–Ω—è –∑ —É–ø–æ—Ä–æ–º –≤ —Å—Ç—ñ–Ω—É 2√ó15—Å –Ω–∞ —Ä—É–∫—É': 'Wall push static hold 2√ó15s per arm',
                    '–°—Ç–∞—Ç–∏—á–Ω–µ —É—Ç—Ä–∏–º–∞–Ω–Ω—è –∑ —É–ø–æ—Ä–æ–º 2√ó15—Å –Ω–∞ —Ä—É–∫—É': 'Static hold with support 2√ó15s per arm',
                    '–°—Ç–∞—Ç–∏—á–Ω–µ —É—Ç—Ä–∏–º–∞–Ω–Ω—è –±–æ–∫–æ–º 2√ó10—Å –Ω–∞ —Ä—É–∫—É': 'Side static hold 2√ó10s per arm',
                    '–°—Ç–∞—Ç–∏—á–Ω–µ —É—Ç—Ä–∏–º–∞–Ω–Ω—è –±–æ–∫–æ–º 2√ó15—Å –Ω–∞ —Ä—É–∫—É': 'Side static hold 2√ó15s per arm',
                    '–û–±–µ—Ä—Ç–∞–Ω–Ω—è —Ç—É–ª—É–±–∞ –∑ —É–ø–æ—Ä–æ–º 3√ó12 –Ω–∞ —Ä—É–∫—É': 'Torso rotation with support 3√ó12 per arm',
                    '–§—ñ–∫—Å–∞—Ü—ñ—è –ª–æ–ø–∞—Ç–∫–∏ –∑ –Ω–∞—Ö–∏–ª–æ–º 2√ó10 –Ω–∞ —Ä—É–∫—É': 'Scapula fixation with lean 2√ó10 per arm',
                    '–ù–∞—Ç—è–∂–∫–∞ –ª–æ–ø–∞—Ç–æ–∫ —Å—Ç–æ—è—á–∏ –ø–µ—Ä–µ–¥ –¥–∑–µ—Ä–∫–∞–ª–æ–º 3√ó6': 'Scapula stretch standing (mirror) 3√ó6',
                    '–ù–∞—Ç—è–∂–∫–∞ –ª–æ–ø–∞—Ç–æ–∫ –∑ —É–ø–æ—Ä–æ–º –≤ –ª–∞–≤–∫—É 3√ó6': 'Scapula stretch with bench support 3√ó6',
                    '–ó–∞—à–∞–≥—É–≤–∞–Ω–Ω—è —Ä—É–∫–∞–º–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É 3√ó6 –Ω–∞ —Ä—É–∫—É': 'Hand walk-ups on platform 3√ó6 per arm',
                    '–í—ñ–¥–≤–µ–¥–µ–Ω–Ω—è –ª–µ–∂–∞—á–∏ –Ω–∞ –±–æ–∫—É –ú–í 3√ó6': 'Side-lying abduction MW 3√ó6',
                    '–í—ñ–¥–≤–µ–¥–µ–Ω–Ω—è –ª–µ–∂–∞—á–∏ –Ω–∞ –∂–∏–≤–æ—Ç—É –ú–í 3√ó6': 'Prone abduction MW 3√ó6',
                    '–ù–∞—Ç—è–∂–∫–∞ –ª–æ–ø–∞—Ç–æ–∫ –ª–µ–∂–∞—á–∏ –Ω–∞ –ø—ñ–¥–ª–æ–∑—ñ 3√ó5': 'Scapula stretch lying on floor 3√ó5',
                    '–†–æ–∑—Ç—è–∂–∫–∞ –º–æ—Å—Ç—É —Ç–∞ –ø–µ—Ä–µ–¥–Ω—å–æ—ó –ø–æ–≤–µ—Ä—Ö–Ω—ñ —Å—Ç–µ–≥–Ω–∞': 'Bridge and hip flexor stretch',
                    '–û–±–µ—Ä—Ç–∞–Ω–Ω—è –ø–ª–µ—á –Ω–∞ –ø–æ—Ö–∏–ª—ñ–π –ª–∞–≤—Ü—ñ 3√ó6': 'Shoulder rotations on incline bench 3√ó6',
                    '–û–±–µ—Ä—Ç–∞–Ω–Ω—è –ø–ª–µ—á –Ω–∞ –ø–æ—Ö–∏–ª—ñ–π –ª–∞–≤—Ü—ñ 3√ó8': 'Shoulder rotations on incline bench 3√ó8',
                    '–û–±–µ—Ä—Ç–∞–Ω–Ω—è –ø–ª–µ—á –Ω–∞ –ø–æ—Ö–∏–ª—ñ–π –ª–∞–≤—Ü—ñ 3√ó12': 'Shoulder rotations on incline bench 3√ó12',
                    '–Ü–º—ñ—Ç–∞—Ü—ñ—è –∂–∏–º—É –∑ –ø–∞–ª–∫–æ—é 3√ó5': 'Bench press simulation with stick 3√ó5'
                }
            }
        };

        let currentLang = localStorage.getItem('lang') || 'uk';

        function toggleLanguage() {
            currentLang = currentLang === 'uk' ? 'en' : 'uk';
            localStorage.setItem('lang', currentLang);
            updateLanguageIcon();
            renderProgram();
            applyStaticTranslations();
        }

        function updateLanguageIcon() {
            const icon = document.getElementById('langIcon');
            const btn = icon.parentElement;
            icon.textContent = currentLang === 'uk' ? 'EN' : '–£–ö';
            btn.title = currentLang === 'uk' ? 'Switch to English' : '–ü–µ—Ä–µ–º–∫–Ω—É—Ç–∏ –Ω–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫—É';
        }

        function applyStaticTranslations() {
            const t = translations[currentLang];
            
            // Update page title
            document.title = t.title;
            
            // Update header
            document.querySelector('.header-content h1').textContent = t.headerTitle;
            document.querySelector('.header-content p').textContent = t.headerSubtitle;
            
            // Update theme toggle tooltip
            const themeBtn = document.getElementById('themeIcon').parentElement;
            themeBtn.title = currentLang === 'uk' ? '–ó–º—ñ–Ω–∏—Ç–∏ —Ç–µ–º—É' : 'Toggle theme';
            
            // Update config section
            document.querySelector('#configSection h2').textContent = t.settings;
            
            // Update labels
            const labels = document.querySelectorAll('.config-item label');
            const labelTexts = [t.oneRepMaxLabel, t.bicepsLabel, t.inclineLabel, t.ohpLabel, t.closeGripLabel, t.startDateLabel];
            labels.forEach((label, i) => {
                if (labelTexts[i]) label.textContent = labelTexts[i];
            });
            
            // Update units
            const units = document.querySelectorAll('.config-item .unit');
            units[0].textContent = t.unitKg;
            units[1].textContent = t.unit1RM;
            units[2].textContent = t.unitPercent;
            units[3].textContent = t.unitPercent;
            units[4].textContent = t.unitPercent;
            
            // Update legend
            document.querySelector('.legend-title').textContent = t.legendTitle;
            const legendTexts = document.querySelectorAll('.legend-text');
            const legendContent = [t.legendLV, t.legendSV, t.legendVV, t.legendMV, t.legendXY, t.legendUp, t.legendArrow, t.legendSingles];
            legendTexts.forEach((el, i) => {
                if (legendContent[i]) el.innerHTML = legendContent[i];
            });
            
            // Update legend badges
            const legendBadges = document.querySelectorAll('.legend-badge');
            const badgesUk = ['–õ–í', '–°–í', '–í–í', '–ú–í', '–•√ó–£', '‚Üó', '‚Üí', '—Å—ñ–Ω–≥–ª–∏'];
            const badgesEn = ['LW', 'MW', 'HW', 'MinW', 'X√óY', '‚Üó', '‚Üí', 'singles'];
            const badges = currentLang === 'uk' ? badgesUk : badgesEn;
            legendBadges.forEach((el, i) => {
                if (badges[i]) el.textContent = badges[i];
            });
            
            // Update save section
            document.querySelector('.checkbox-label span').textContent = t.compactPdfLabel;
            document.querySelector('.save-btn').textContent = t.savePdfBtn;
            document.querySelector('.save-section .note').textContent = t.saveNote;
            document.querySelector('.loading-spinner p').textContent = t.generatingPdf;
        }

        function getTranslatedText(text, type) {
            const t = translations[currentLang];
            if (type === 'exercise') {
                return t.ex[text] || text;
            }
            if (type === 'warmup') {
                return t.warmupItems[text] || text;
            }
            return text;
        }

        // Initialize language on load
        (function() {
            updateLanguageIcon();
            // Apply static translations after DOM is ready
            setTimeout(() => applyStaticTranslations(), 0);
        })();

        // Toggle functions
        function toggleWeek(weekId) {
            const section = document.getElementById(weekId);
            section.classList.toggle('collapsed');
            saveToggleState();
        }

        function toggleDay(dayId) {
            const section = document.getElementById(dayId);
            section.classList.toggle('collapsed');
            saveToggleState();
        }

        function saveToggleState() {
            const collapsed = {};
            document.querySelectorAll('.week-section.collapsed, .day-section.collapsed').forEach(el => {
                collapsed[el.id] = true;
            });
            localStorage.setItem('collapsedSections', JSON.stringify(collapsed));
        }

        function loadToggleState() {
            const collapsed = JSON.parse(localStorage.getItem('collapsedSections') || '{}');
            for (const [id, isCollapsed] of Object.entries(collapsed)) {
                const el = document.getElementById(id);
                if (el && isCollapsed) el.classList.add('collapsed');
            }
        }

        // Weight calculation - ranges from the program document
        const WEIGHT_RANGES = {
            '–õ–í': { min: 40, max: 55 },
            '–°–í': { min: 50, max: 60 },
            '–í–í': { min: 70, max: 85 }
        };

        // YouTube video links for warmup/cooldown exercises
        const VIDEO_LINKS = {
            '–Ω–∞—Ç—è–∂–∫–∞ –ª–æ–ø–∞—Ç–æ–∫ —Å—Ç–æ—è—á–∏ –ø–µ—Ä–µ–¥ –¥–∑–µ—Ä–∫–∞–ª–æ–º': 'https://youtu.be/nHZ-HnS2BV0?si=uCDwGooEmoWDlJyg&t=249',
            '–Ω–∞—Ç—è–∂–∫–∞ –ª–æ–ø–∞—Ç–æ–∫ –ª–µ–∂–∞—á–∏ –Ω–∞ –ø—ñ–¥–ª–æ–∑—ñ': 'https://youtu.be/nHZ-HnS2BV0?si=5ikvBkll7-p2JU4n&t=269',
            '–Ω–∞—Ç—è–∂–∫–∞ –ª–æ–ø–∞—Ç–æ–∫ –∑ —É–ø–æ—Ä–æ–º –≤ –ª–∞–≤–∫—É': 'https://youtu.be/nHZ-HnS2BV0?si=YT_0nRRZLmQSaB-s&t=291',
            '—ñ–º—ñ—Ç–∞—Ü—ñ—è –∂–∏–º—É –∑ –ø–∞–ª–∫–æ—é': 'https://youtu.be/nHZ-HnS2BV0?si=1h4vNfabjvqun1a2&t=284',
            '–ø—ñ–¥–π–æ–º –ø—Ä—è–º–∏—Ö —Ä—É–∫ –¥–æ –≥–æ—Ä–∏': 'https://youtu.be/nHZ-HnS2BV0?si=WJsRF7cxKfksMeIl&t=426',
            '–ø—ñ–¥–π–æ–º –ø—Ä—è–º–∏—Ö —Ä—É–∫ —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä–æ–Ω–∏': 'https://youtu.be/nHZ-HnS2BV0?si=21uHOegGrqHsX-em&t=434',
            '–∑–∞—à–∞–≥—É–≤–∞–Ω–Ω—è —Ä—É–∫–∞–º–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É': 'https://youtu.be/nHZ-HnS2BV0?si=2kpnECmoZZygh5A_&t=440',
            '–æ–±–µ—Ä—Ç–∞–Ω–Ω—è —Ç—É–ª—É–±–∞ –∑ —É–ø–æ—Ä–æ–º': 'https://youtu.be/nHZ-HnS2BV0?si=2HbygAKerkJ_TH43&t=447',
            '—Ñ—ñ–∫—Å–∞—Ü—ñ—è –ª–æ–ø–∞—Ç–∫–∏ –∑ –Ω–∞—Ö–∏–ª–æ–º': 'https://youtu.be/nHZ-HnS2BV0?si=R9vFCLNYCjEOrIMY&t=462',
            '–æ–±–µ—Ä—Ç–∞–Ω–Ω—è –ø–ª–µ—á –Ω–∞ –ø–æ—Ö–∏–ª—ñ–π –ª–∞–≤—Ü—ñ': 'https://youtu.be/nHZ-HnS2BV0?si=5UOsxZ4Q3bzlmf5f&t=483',
            '–≤—ñ–¥–≤–µ–¥–µ–Ω–Ω—è –ª–µ–∂–∞—á–∏ –Ω–∞ –∂–∏–≤–æ—Ç—É': 'https://youtu.be/nHZ-HnS2BV0?si=zF6D0UcBsfMNHBDA&t=497',
            '–≤—ñ–¥–≤–µ–¥–µ–Ω–Ω—è –ª–µ–∂–∞—á–∏ –Ω–∞ –±–æ–∫—É': 'https://youtu.be/nHZ-HnS2BV0?si=qa9hzhH0zO_kyeeL&t=515',
            '—Å—Ç–∞—Ç–∏—á–Ω–µ —É—Ç—Ä–∏–º–∞–Ω–Ω—è –∑ —É–ø–æ—Ä–æ–º': 'https://youtu.be/nHZ-HnS2BV0?si=U3MZBjhk0IHpLhma&t=542',
            '—Å—Ç–∞—Ç–∏—á–Ω–µ —É—Ç—Ä–∏–º–∞–Ω–Ω—è –±–æ–∫–æ–º': 'https://youtu.be/nHZ-HnS2BV0?si=39iG6fMvkWVVsf4L&t=555',
            '—Ä–æ–∑—Ç—è–∂–∫–∞ –º–æ—Å—Ç—É —Ç–∞ –ø–µ—Ä–µ–¥–Ω—å–æ—ó –ø–æ–≤–µ—Ä—Ö–Ω—ñ —Å—Ç–µ–≥–Ω–∞': 'https://youtu.be/nHZ-HnS2BV0?si=ceo-KF66OPwOsP-F&t=1046'
        };

        function addVideoLink(displayText, originalText = null) {
            const textToMatch = (originalText || displayText).toLowerCase();
            for (const [keyword, url] of Object.entries(VIDEO_LINKS)) {
                if (textToMatch.includes(keyword)) {
                    return `<a href="${url}" target="_blank" class="video-link">${displayText}</a>`;
                }
            }
            return displayText;
        }

        function roundToBarbell(weight) {
            return Math.round(weight / 2.5) * 2.5;
        }

        // Program data
        const program = {
            week1: {
                day1: {
                    warmup: [
                        "–ó–∞–≥–∞–ª—å–Ω–∞ —Ä–æ–∑–º–∏–Ω–∫–∞, –∫–∞—Ä–¥—ñ–æ 10 —Ö–≤",
                        "–ü—ñ–¥–π–æ–º –ø—Ä—è–º–∏—Ö —Ä—É–∫ –¥–æ –≥–æ—Ä–∏ 3√ó10",
                        "–ü—ñ–¥–π–æ–º –ø—Ä—è–º–∏—Ö —Ä—É–∫ —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä–æ–Ω–∏ 3√ó10",
                        "–°—Ç–∞—Ç–∏—á–Ω–µ —É—Ç—Ä–∏–º–∞–Ω–Ω—è –∑ —É–ø–æ—Ä–æ–º –≤ —Å—Ç—ñ–Ω—É 2√ó10—Å –Ω–∞ —Ä—É–∫—É",
                        "–°—Ç–∞—Ç–∏—á–Ω–µ —É—Ç—Ä–∏–º–∞–Ω–Ω—è –±–æ–∫–æ–º 2√ó10—Å –Ω–∞ —Ä—É–∫—É"
                    ],
                    exercises: [
                        { name: "–ñ–∏–º –ª–µ–∂–∞—á–∏", sets: "5√ó5", weight: "–õ–í", type: "bench" },
                        { name: "–¢—è–≥–∞ –≤–µ—Ä—Ö–Ω—å–æ–≥–æ –±–ª–æ–∫—É –∑ –¥–µ–ø—Ä–µ—Å—ñ—î—é –ª–æ–ø–∞—Ç–∫–∏", sets: "3√ó6", weight: "–õ–í", type: "other" },
                        { name: "–®—Ä–∞–≥–∏ –∑ —Ä–µ—Ç—Ä–∞–∫—Ü—ñ—î—é –ª–æ–ø–∞—Ç–∫–∏", sets: "5√ó5", weight: "–õ–í", type: "other" },
                        { name: "–ñ–∏–º –ª–µ–∂–∞—á–∏", sets: "4√ó4", weight: "–°–í", type: "bench" },
                        { name: "–ë—ñ—Ü–µ–ø—Å —Å—Ç–æ—è—á–∏", sets: "4√ó8", weight: "–õ–í", type: "biceps" }
                    ],
                    cooldown: [
                        "–ù–∞—Ç—è–∂–∫–∞ –ª–æ–ø–∞—Ç–æ–∫ —Å—Ç–æ—è—á–∏ –ø–µ—Ä–µ–¥ –¥–∑–µ—Ä–∫–∞–ª–æ–º 3√ó6",
                        "–ù–∞—Ç—è–∂–∫–∞ –ª–æ–ø–∞—Ç–æ–∫ –∑ —É–ø–æ—Ä–æ–º –≤ –ª–∞–≤–∫—É 3√ó6",
                        "–ó–∞—à–∞–≥—É–≤–∞–Ω–Ω—è —Ä—É–∫–∞–º–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É 3√ó6 –Ω–∞ —Ä—É–∫—É"
                    ]
                },
                day2: {
                    warmup: [
                        "–ó–∞–≥–∞–ª—å–Ω–∞ —Ä–æ–∑–º–∏–Ω–∫–∞, –∫–∞—Ä–¥—ñ–æ 10 —Ö–≤",
                        "–ü—ñ–¥–π–æ–º –ø—Ä—è–º–∏—Ö —Ä—É–∫ –¥–æ –≥–æ—Ä–∏ 3√ó10",
                        "–ü—ñ–¥–π–æ–º –ø—Ä—è–º–∏—Ö —Ä—É–∫ —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä–æ–Ω–∏ 3√ó10",
                        "–û–±–µ—Ä—Ç–∞–Ω–Ω—è —Ç—É–ª—É–±–∞ –∑ —É–ø–æ—Ä–æ–º 3√ó12 –Ω–∞ —Ä—É–∫—É",
                        "–§—ñ–∫—Å–∞—Ü—ñ—è –ª–æ–ø–∞—Ç–∫–∏ –∑ –Ω–∞—Ö–∏–ª–æ–º 2√ó10 –Ω–∞ —Ä—É–∫—É"
                    ],
                    exercises: [
                        { name: "–ñ–∏–º –ª–µ–∂–∞—á–∏", sets: "2√ó2", weight: "–õ–í", type: "bench" },
                        { name: "–ñ–∏–º –ª–µ–∂–∞—á–∏", sets: "–ø–æ 1 –≤ –≥–æ—Ä—É –¥–æ –≤–∞–∂–∫–æ–≥–æ", weight: "‚Üí", type: "bench_pyramid" },
                        { name: "–ñ–∏–º –ê—Ä–Ω–æ–ª—å–¥–∞", sets: "3√ó10", weight: "–õ–í", type: "other" },
                        { name: "–¢—è–≥–∞ –Ω–∏–∂–Ω—å–æ–≥–æ –±–ª–æ–∫—É –∑ —Ä–µ—Ç—Ä–∞–∫—Ü—ñ—î—é", sets: "5√ó5", weight: "–°–í", type: "other" },
                        { name: "–ñ–∏–º –≤—É–∑—å–∫–∏–º —Ö–≤–∞—Ç–æ–º", sets: "3√ó8", weight: "–õ–í", type: "close_grip" },
                        { name: "–ú–æ–ª–æ—Ç–∫–æ–≤—ñ –∑–≥–∏–Ω–∞–Ω–Ω—è", sets: "4√ó5", weight: "–°–í", type: "other" }
                    ],
                    cooldown: [
                        "–ù–∞—Ç—è–∂–∫–∞ –ª–æ–ø–∞—Ç–æ–∫ —Å—Ç–æ—è—á–∏ –ø–µ—Ä–µ–¥ –¥–∑–µ—Ä–∫–∞–ª–æ–º 3√ó6",
                        "–ù–∞—Ç—è–∂–∫–∞ –ª–æ–ø–∞—Ç–æ–∫ –∑ —É–ø–æ—Ä–æ–º –≤ –ª–∞–≤–∫—É 3√ó6",
                        "–í—ñ–¥–≤–µ–¥–µ–Ω–Ω—è –ª–µ–∂–∞—á–∏ –Ω–∞ –±–æ–∫—É –ú–í 3√ó6",
                        "–í—ñ–¥–≤–µ–¥–µ–Ω–Ω—è –ª–µ–∂–∞—á–∏ –Ω–∞ –∂–∏–≤–æ—Ç—É –ú–í 3√ó6"
                    ]
                },
                day3: {
                    warmup: [
                        "–ó–∞–≥–∞–ª—å–Ω–∞ —Ä–æ–∑–º–∏–Ω–∫–∞, –∫–∞—Ä–¥—ñ–æ 10 —Ö–≤",
                        "–ü—ñ–¥–π–æ–º –ø—Ä—è–º–∏—Ö —Ä—É–∫ –¥–æ –≥–æ—Ä–∏ 3√ó10",
                        "–ü—ñ–¥–π–æ–º –ø—Ä—è–º–∏—Ö —Ä—É–∫ —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä–æ–Ω–∏ 3√ó10",
                        "–û–±–µ—Ä—Ç–∞–Ω–Ω—è —Ç—É–ª—É–±–∞ –∑ —É–ø–æ—Ä–æ–º 3√ó12 –Ω–∞ —Ä—É–∫—É",
                        "–ù–∞—Ç—è–∂–∫–∞ –ª–æ–ø–∞—Ç–æ–∫ –ª–µ–∂–∞—á–∏ –Ω–∞ –ø—ñ–¥–ª–æ–∑—ñ 3√ó5"
                    ],
                    exercises: [
                        { name: "–ñ–∏–º –ª–µ–∂–∞—á–∏", sets: "5√ó5", weight: "–õ–í", type: "bench" },
                        { name: "–ñ–∏–º –ª–µ–∂–∞—á–∏ (—Å—ñ–Ω–≥–ª–∏)", sets: "3√ó1", weight: "–õ–í", type: "bench" },
                        { name: "–ñ–∏–º –≥–∞–Ω—Ç–µ–ª—å –Ω–∞ –ø–æ—Ö–∏–ª—ñ–π –ª–∞–≤—Ü—ñ", sets: "3√ó8", weight: "–°–í", type: "incline" },
                        { name: "–ú–∞—Ö–∏ –Ω–∞ —Å–µ—Ä–µ–¥–Ω—é –¥–µ–ª—å—Ç—É", sets: "3√ó8", weight: "‚Üó", type: "other" },
                        { name: "–ú–∞—Ö–∏ –Ω–∞ –∑–∞–¥–Ω—é –¥–µ–ª—å—Ç—É", sets: "3√ó8", weight: "‚Üó", type: "other" },
                        { name: "–ñ–∏–º —Å—Ç–æ—è—á–∏", sets: "4√ó4", weight: "–°–í", type: "ohp" },
                        { name: "–†–æ–∑–≥–∏–Ω–∞–Ω–Ω—è —ñ–∑-–∑–∞ –≥–æ–ª–æ–≤–∏", sets: "3√ó8", weight: "–õ–í", type: "other" }
                    ],
                    cooldown: [
                        "–†–æ–∑—Ç—è–∂–∫–∞ –º–æ—Å—Ç—É —Ç–∞ –ø–µ—Ä–µ–¥–Ω—å–æ—ó –ø–æ–≤–µ—Ä—Ö–Ω—ñ —Å—Ç–µ–≥–Ω–∞"
                    ]
                }
            },
            week2: {
                day1: {
                    warmup: [
                        "–ó–∞–≥–∞–ª—å–Ω–∞ —Ä–æ–∑–º–∏–Ω–∫–∞, –∫–∞—Ä–¥—ñ–æ 10 —Ö–≤",
                        "–ü—ñ–¥–π–æ–º –ø—Ä—è–º–∏—Ö —Ä—É–∫ –¥–æ –≥–æ—Ä–∏ 3√ó12",
                        "–ü—ñ–¥–π–æ–º –ø—Ä—è–º–∏—Ö —Ä—É–∫ —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä–æ–Ω–∏ 3√ó12",
                        "–°—Ç–∞—Ç–∏—á–Ω–µ —É—Ç—Ä–∏–º–∞–Ω–Ω—è –∑ —É–ø–æ—Ä–æ–º –≤ —Å—Ç—ñ–Ω—É 2√ó15—Å –Ω–∞ —Ä—É–∫—É",
                        "–°—Ç–∞—Ç–∏—á–Ω–µ —É—Ç—Ä–∏–º–∞–Ω–Ω—è –±–æ–∫–æ–º 2√ó15—Å –Ω–∞ —Ä—É–∫—É"
                    ],
                    exercises: [
                        { name: "–ñ–∏–º –ª–µ–∂–∞—á–∏", sets: "5√ó5", weight: "–õ–í", type: "bench" },
                        { name: "–ñ–∏–º –ª–µ–∂–∞—á–∏ (—Å—ñ–Ω–≥–ª–∏)", sets: "5√ó1", weight: "–õ–í", type: "bench" },
                        { name: "–¢—è–≥–∞ –≤–µ—Ä—Ö–Ω—å–æ–≥–æ –±–ª–æ–∫—É –∑ –¥–µ–ø—Ä–µ—Å—ñ—î—é –ª–æ–ø–∞—Ç–∫–∏", sets: "3√ó6", weight: "–°–í", type: "other" },
                        { name: "–®—Ä–∞–≥–∏ –∑ —Ä–µ—Ç—Ä–∞–∫—Ü—ñ—î—é –ª–æ–ø–∞—Ç–∫–∏", sets: "5√ó5", weight: "–°–í", type: "other" },
                        { name: "–ñ–∏–º –ª–µ–∂–∞—á–∏", sets: "4√ó4", weight: "–í–í", type: "bench" },
                        { name: "–ë—ñ—Ü–µ–ø—Å —Å—Ç–æ—è—á–∏", sets: "4√ó4", weight: "–í–í", type: "biceps" }
                    ],
                    cooldown: [
                        "–ù–∞—Ç—è–∂–∫–∞ –ª–æ–ø–∞—Ç–æ–∫ —Å—Ç–æ—è—á–∏ –ø–µ—Ä–µ–¥ –¥–∑–µ—Ä–∫–∞–ª–æ–º 3√ó6",
                        "–ù–∞—Ç—è–∂–∫–∞ –ª–æ–ø–∞—Ç–æ–∫ –∑ —É–ø–æ—Ä–æ–º –≤ –ª–∞–≤–∫—É 3√ó6",
                        "–ó–∞—à–∞–≥—É–≤–∞–Ω–Ω—è —Ä—É–∫–∞–º–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É 3√ó6 –Ω–∞ —Ä—É–∫—É"
                    ]
                },
                day2: {
                    warmup: [
                        "–ó–∞–≥–∞–ª—å–Ω–∞ —Ä–æ–∑–º–∏–Ω–∫–∞, –∫–∞—Ä–¥—ñ–æ 10 —Ö–≤",
                        "–û–±–µ—Ä—Ç–∞–Ω–Ω—è –ø–ª–µ—á –Ω–∞ –ø–æ—Ö–∏–ª—ñ–π –ª–∞–≤—Ü—ñ 3√ó6",
                        "–ü—ñ–¥–π–æ–º –ø—Ä—è–º–∏—Ö —Ä—É–∫ —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä–æ–Ω–∏ 3√ó10",
                        "–û–±–µ—Ä—Ç–∞–Ω–Ω—è —Ç—É–ª—É–±–∞ –∑ —É–ø–æ—Ä–æ–º 3√ó12 –Ω–∞ —Ä—É–∫—É",
                        "–§—ñ–∫—Å–∞—Ü—ñ—è –ª–æ–ø–∞—Ç–∫–∏ –∑ –Ω–∞—Ö–∏–ª–æ–º 2√ó10 –Ω–∞ —Ä—É–∫—É"
                    ],
                    exercises: [
                        { name: "–í—ñ–¥—Ç–∏—Å–∫–∞–Ω–Ω—è –Ω–∞ –±—Ä—É—Å–∞—Ö", sets: "4√ó4", weight: "–≤–ª–∞—Å–Ω–∞/–°–í", type: "other" },
                        { name: "–ñ–∏–º –ê—Ä–Ω–æ–ª—å–¥–∞", sets: "5√ó5", weight: "–°–í", type: "other" },
                        { name: "–¢—è–≥–∞ –Ω–∏–∂–Ω—å–æ–≥–æ –±–ª–æ–∫—É –∑ —Ä–µ—Ç—Ä–∞–∫—Ü—ñ—î—é –ª–æ–ø–∞—Ç–∫–∏", sets: "5√ó5", weight: "–°–í", type: "other" },
                        { name: "–ñ–∏–º —Å—Ç–æ—è—á–∏", sets: "5√ó3", weight: "–°–í", type: "ohp" },
                        { name: "–ñ–∏–º –≤—É–∑—å–∫–∏–º —Ö–≤–∞—Ç–æ–º", sets: "3√ó8", weight: "–õ–í", type: "close_grip" },
                        { name: "–ú–æ–ª–æ—Ç–∫–æ–≤—ñ –∑–≥–∏–Ω–∞–Ω–Ω—è", sets: "4√ó5", weight: "–°–í", type: "other" }
                    ],
                    cooldown: [
                        "–í—ñ–¥–≤–µ–¥–µ–Ω–Ω—è –ª–µ–∂–∞—á–∏ –Ω–∞ –±–æ–∫—É –ú–í 3√ó6",
                        "–í—ñ–¥–≤–µ–¥–µ–Ω–Ω—è –ª–µ–∂–∞—á–∏ –Ω–∞ –∂–∏–≤–æ—Ç—É –ú–í 3√ó6"
                    ]
                },
                day3: {
                    warmup: [
                        "–ó–∞–≥–∞–ª—å–Ω–∞ —Ä–æ–∑–º–∏–Ω–∫–∞, –∫–∞—Ä–¥—ñ–æ 10 —Ö–≤",
                        "–û–±–µ—Ä—Ç–∞–Ω–Ω—è –ø–ª–µ—á –Ω–∞ –ø–æ—Ö–∏–ª—ñ–π –ª–∞–≤—Ü—ñ 3√ó6",
                        "–û–±–µ—Ä—Ç–∞–Ω–Ω—è —Ç—É–ª—É–±–∞ –∑ —É–ø–æ—Ä–æ–º 3√ó12 –Ω–∞ —Ä—É–∫—É",
                        "–†–æ–∑—Ç—è–∂–∫–∞ –º–æ—Å—Ç—É —Ç–∞ –ø–µ—Ä–µ–¥–Ω—å–æ—ó –ø–æ–≤–µ—Ä—Ö–Ω—ñ —Å—Ç–µ–≥–Ω–∞"
                    ],
                    exercises: [
                        { name: "–ñ–∏–º –ª–µ–∂–∞—á–∏", sets: "5√ó5", weight: "–í–í", type: "bench" },
                        { name: "–ñ–∏–º –≥–∞–Ω—Ç–µ–ª—å –Ω–∞ –ø–æ—Ö–∏–ª—ñ–π –ª–∞–≤—Ü—ñ", sets: "4√ó4", weight: "–í–í", type: "incline" },
                        { name: "–ú–∞—Ö–∏ –Ω–∞ —Å–µ—Ä–µ–¥–Ω—é –¥–µ–ª—å—Ç—É", sets: "3√ó8", weight: "‚Üó", type: "other" },
                        { name: "–ú–∞—Ö–∏ –Ω–∞ –∑–∞–¥–Ω—é –¥–µ–ª—å—Ç—É", sets: "3√ó8", weight: "‚Üó", type: "other" },
                        { name: "–í—ñ–¥—Ç–∏—Å–∫–∞–Ω–Ω—è –Ω–∞ –±—Ä—É—Å–∞—Ö", sets: "4√ó4", weight: "‚Üó", type: "other" }
                    ],
                    cooldown: [
                        "–†–æ–∑—Ç—è–∂–∫–∞ –º–æ—Å—Ç—É —Ç–∞ –ø–µ—Ä–µ–¥–Ω—å–æ—ó –ø–æ–≤–µ—Ä—Ö–Ω—ñ —Å—Ç–µ–≥–Ω–∞",
                        "–ó–∞—à–∞–≥—É–≤–∞–Ω–Ω—è —Ä—É–∫–∞–º–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É 3√ó6 –Ω–∞ —Ä—É–∫—É"
                    ]
                }
            },
            week3: {
                day1: {
                    warmup: [
                        "–ó–∞–≥–∞–ª—å–Ω–∞ —Ä–æ–∑–º–∏–Ω–∫–∞, –∫–∞—Ä–¥—ñ–æ 10 —Ö–≤",
                        "–û–±–µ—Ä—Ç–∞–Ω–Ω—è –ø–ª–µ—á –Ω–∞ –ø–æ—Ö–∏–ª—ñ–π –ª–∞–≤—Ü—ñ 3√ó6",
                        "–û–±–µ—Ä—Ç–∞–Ω–Ω—è —Ç—É–ª—É–±–∞ –∑ —É–ø–æ—Ä–æ–º 3√ó12 –Ω–∞ —Ä—É–∫—É",
                        "–Ü–º—ñ—Ç–∞—Ü—ñ—è –∂–∏–º—É –∑ –ø–∞–ª–∫–æ—é 3√ó5"
                    ],
                    exercises: [
                        { name: "–ñ–∏–º –ª–µ–∂–∞—á–∏", sets: "4√ó4", weight: "–õ–í", type: "bench" },
                        { name: "–ñ–∏–º –ª–µ–∂–∞—á–∏ (—Å—ñ–Ω–≥–ª–∏)", sets: "5√ó1", weight: "–õ–í", type: "bench" },
                        { name: "–¢—è–≥–∞ –≤–µ—Ä—Ö–Ω—å–æ–≥–æ –±–ª–æ–∫—É –∑ –¥–µ–ø—Ä–µ—Å—ñ—î—é", sets: "3√ó6", weight: "–°–í", type: "other" },
                        { name: "–®—Ä–∞–≥–∏ –∑ —Ä–µ—Ç—Ä–∞–∫—Ü—ñ—î—é –ª–æ–ø–∞—Ç–∫–∏", sets: "5√ó5", weight: "–°–í", type: "other" },
                        { name: "–ñ–∏–º —Å—Ç–æ—è—á–∏", sets: "4√ó4", weight: "–°–í", type: "ohp" },
                        { name: "–ñ–∏–º –≤—É–∑—å–∫–∏–º —Ö–≤–∞—Ç–æ–º", sets: "5√ó2", weight: "–í–í", type: "close_grip" }
                    ],
                    cooldown: [
                        "–†–æ–∑—Ç—è–∂–∫–∞ –º–æ—Å—Ç—É —Ç–∞ –ø–µ—Ä–µ–¥–Ω—å–æ—ó –ø–æ–≤–µ—Ä—Ö–Ω—ñ —Å—Ç–µ–≥–Ω–∞",
                        "–ó–∞—à–∞–≥—É–≤–∞–Ω–Ω—è —Ä—É–∫–∞–º–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É 3√ó6 –Ω–∞ —Ä—É–∫—É",
                        "–ù–∞—Ç—è–∂–∫–∞ –ª–æ–ø–∞—Ç–æ–∫ –ª–µ–∂–∞—á–∏ –Ω–∞ –ø—ñ–¥–ª–æ–∑—ñ 3√ó5"
                    ]
                },
                day2: {
                    warmup: [
                        "–ó–∞–≥–∞–ª—å–Ω–∞ —Ä–æ–∑–º–∏–Ω–∫–∞, –∫–∞—Ä–¥—ñ–æ 10 —Ö–≤",
                        "–û–±–µ—Ä—Ç–∞–Ω–Ω—è –ø–ª–µ—á –Ω–∞ –ø–æ—Ö–∏–ª—ñ–π –ª–∞–≤—Ü—ñ 3√ó8",
                        "–û–±–µ—Ä—Ç–∞–Ω–Ω—è —Ç—É–ª—É–±–∞ –∑ —É–ø–æ—Ä–æ–º 3√ó12 –Ω–∞ —Ä—É–∫—É",
                        "–§—ñ–∫—Å–∞—Ü—ñ—è –ª–æ–ø–∞—Ç–∫–∏ –∑ –Ω–∞—Ö–∏–ª–æ–º 2√ó10 –Ω–∞ —Ä—É–∫—É",
                        "–Ü–º—ñ—Ç–∞—Ü—ñ—è –∂–∏–º—É –∑ –ø–∞–ª–∫–æ—é 3√ó5"
                    ],
                    exercises: [
                        { name: "–í—ñ–¥—Ç–∏—Å–∫–∞–Ω–Ω—è –Ω–∞ –±—Ä—É—Å–∞—Ö", sets: "4√ó4", weight: "–≤–ª–∞—Å–Ω–∞/–°–í", type: "other" },
                        { name: "–ñ–∏–º –ê—Ä–Ω–æ–ª—å–¥–∞", sets: "4√ó10", weight: "–õ–í", type: "other" },
                        { name: "–¢—è–≥–∞ –Ω–∏–∂–Ω—å–æ–≥–æ –±–ª–æ–∫—É –∑ —Ä–µ—Ç—Ä–∞–∫—Ü—ñ—î—é", sets: "5√ó5", weight: "–°–í", type: "other" },
                        { name: "–ñ–∏–º –ª–µ–∂–∞—á–∏", sets: "2√ó2", weight: "–õ–í", type: "bench" },
                        { name: "–ñ–∏–º –ª–µ–∂–∞—á–∏", sets: "–ø–æ 1 –≤ –≥–æ—Ä—É –¥–æ –≤–∞–∂–∫–æ–≥–æ", weight: "‚Üí", type: "bench_pyramid" },
                        { name: "–ú–æ–ª–æ—Ç–∫–æ–≤—ñ –∑–≥–∏–Ω–∞–Ω–Ω—è", sets: "4√ó5", weight: "–°–í", type: "other" }
                    ],
                    cooldown: [
                        "–†–æ–∑—Ç—è–∂–∫–∞ –º–æ—Å—Ç—É —Ç–∞ –ø–µ—Ä–µ–¥–Ω—å–æ—ó –ø–æ–≤–µ—Ä—Ö–Ω—ñ —Å—Ç–µ–≥–Ω–∞",
                        "–í—ñ–¥–≤–µ–¥–µ–Ω–Ω—è –ª–µ–∂–∞—á–∏ –Ω–∞ –±–æ–∫—É –ú–í 3√ó6",
                        "–í—ñ–¥–≤–µ–¥–µ–Ω–Ω—è –ª–µ–∂–∞—á–∏ –Ω–∞ –∂–∏–≤–æ—Ç—É –ú–í 3√ó6"
                    ]
                }
            },
            week4: {
                day1: {
                    warmup: [
                        "–ó–∞–≥–∞–ª—å–Ω–∞ —Ä–æ–∑–º–∏–Ω–∫–∞, –∫–∞—Ä–¥—ñ–æ 10 —Ö–≤",
                        "–°—Ç–∞—Ç–∏—á–Ω–µ —É—Ç—Ä–∏–º–∞–Ω–Ω—è –∑ —É–ø–æ—Ä–æ–º 2√ó15—Å –Ω–∞ —Ä—É–∫—É",
                        "–°—Ç–∞—Ç–∏—á–Ω–µ —É—Ç—Ä–∏–º–∞–Ω–Ω—è –±–æ–∫–æ–º 2√ó15—Å –Ω–∞ —Ä—É–∫—É",
                        "–Ü–º—ñ—Ç–∞—Ü—ñ—è –∂–∏–º—É –∑ –ø–∞–ª–∫–æ—é 3√ó5"
                    ],
                    exercises: [
                        { name: "–ñ–∏–º –ª–µ–∂–∞—á–∏", sets: "5√ó5", weight: "–°–í", type: "bench" },
                        { name: "–¢—è–≥–∞ –≤–µ—Ä—Ö–Ω—å–æ–≥–æ –±–ª–æ–∫—É –∑ –¥–µ–ø—Ä–µ—Å—ñ—î—é", sets: "3√ó6", weight: "–°–í", type: "other" },
                        { name: "–®—Ä–∞–≥–∏ –∑ —Ä–µ—Ç—Ä–∞–∫—Ü—ñ—î—é –ª–æ–ø–∞—Ç–∫–∏", sets: "5√ó5", weight: "–°–í", type: "other" },
                        { name: "–ñ–∏–º –ª–µ–∂–∞—á–∏", sets: "4√ó4", weight: "–í–í", type: "bench" },
                        { name: "–ë—ñ—Ü–µ–ø—Å —Å—Ç–æ—è—á–∏", sets: "3√ó8", weight: "–õ–í", type: "biceps" }
                    ],
                    cooldown: [
                        "–ù–∞—Ç—è–∂–∫–∞ –ª–æ–ø–∞—Ç–æ–∫ —Å—Ç–æ—è—á–∏ –ø–µ—Ä–µ–¥ –¥–∑–µ—Ä–∫–∞–ª–æ–º 3√ó6",
                        "–ù–∞—Ç—è–∂–∫–∞ –ª–æ–ø–∞—Ç–æ–∫ –∑ —É–ø–æ—Ä–æ–º –≤ –ª–∞–≤–∫—É 3√ó6",
                        "–ó–∞—à–∞–≥—É–≤–∞–Ω–Ω—è —Ä—É–∫–∞–º–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É 3√ó6 –Ω–∞ —Ä—É–∫—É"
                    ]
                },
                day2: {
                    warmup: [
                        "–ó–∞–≥–∞–ª—å–Ω–∞ —Ä–æ–∑–º–∏–Ω–∫–∞, –∫–∞—Ä–¥—ñ–æ 10 —Ö–≤",
                        "–û–±–µ—Ä—Ç–∞–Ω–Ω—è –ø–ª–µ—á –Ω–∞ –ø–æ—Ö–∏–ª—ñ–π –ª–∞–≤—Ü—ñ 3√ó8",
                        "–ü—ñ–¥–π–æ–º –ø—Ä—è–º–∏—Ö —Ä—É–∫ —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä–æ–Ω–∏ 3√ó10",
                        "–û–±–µ—Ä—Ç–∞–Ω–Ω—è —Ç—É–ª—É–±–∞ –∑ —É–ø–æ—Ä–æ–º 3√ó12 –Ω–∞ —Ä—É–∫—É",
                        "–§—ñ–∫—Å–∞—Ü—ñ—è –ª–æ–ø–∞—Ç–∫–∏ –∑ –Ω–∞—Ö–∏–ª–æ–º 2√ó10 –Ω–∞ —Ä—É–∫—É"
                    ],
                    exercises: [
                        { name: "–í—ñ–¥—Ç–∏—Å–∫–∞–Ω–Ω—è –Ω–∞ –±—Ä—É—Å–∞—Ö", sets: "4√ó4", weight: "–≤–ª–∞—Å–Ω–∞/–°–í", type: "other" },
                        { name: "–ñ–∏–º –ê—Ä–Ω–æ–ª—å–¥–∞", sets: "5√ó5", weight: "–°–í", type: "other" },
                        { name: "–¢—è–≥–∞ –Ω–∏–∂–Ω—å–æ–≥–æ –±–ª–æ–∫—É –∑ —Ä–µ—Ç—Ä–∞–∫—Ü—ñ—î—é", sets: "5√ó5", weight: "–°–í", type: "other" },
                        { name: "–ü—É–ª–æ–≤–µ—Ä —á–µ—Ä–µ–∑ –ª–∞–≤–∫—É", sets: "3√ó8", weight: "–õ–í", type: "other" },
                        { name: "–†–æ–∑–≥–∏–Ω–∞–Ω–Ω—è —ñ–∑-–∑–∞ –≥–æ–ª–æ–≤–∏", sets: "4√ó5", weight: "–õ–í", type: "other" }
                    ],
                    cooldown: [
                        "–í—ñ–¥–≤–µ–¥–µ–Ω–Ω—è –ª–µ–∂–∞—á–∏ –Ω–∞ –±–æ–∫—É –ú–í 3√ó6",
                        "–í—ñ–¥–≤–µ–¥–µ–Ω–Ω—è –ª–µ–∂–∞—á–∏ –Ω–∞ –∂–∏–≤–æ—Ç—É –ú–í 3√ó6"
                    ]
                },
                day3: {
                    warmup: [
                        "–ó–∞–≥–∞–ª—å–Ω–∞ —Ä–æ–∑–º–∏–Ω–∫–∞, –∫–∞—Ä–¥—ñ–æ 10 —Ö–≤",
                        "–û–±–µ—Ä—Ç–∞–Ω–Ω—è –ø–ª–µ—á –Ω–∞ –ø–æ—Ö–∏–ª—ñ–π –ª–∞–≤—Ü—ñ 3√ó12",
                        "–û–±–µ—Ä—Ç–∞–Ω–Ω—è —Ç—É–ª—É–±–∞ –∑ —É–ø–æ—Ä–æ–º 3√ó12 –Ω–∞ —Ä—É–∫—É",
                        "–†–æ–∑—Ç—è–∂–∫–∞ –º–æ—Å—Ç—É —Ç–∞ –ø–µ—Ä–µ–¥–Ω—å–æ—ó –ø–æ–≤–µ—Ä—Ö–Ω—ñ —Å—Ç–µ–≥–Ω–∞"
                    ],
                    exercises: [
                        { name: "–ñ–∏–º –ª–µ–∂–∞—á–∏", sets: "5√ó3", weight: "–í–í", type: "bench" },
                        { name: "–ñ–∏–º –≥–∞–Ω—Ç–µ–ª—å –Ω–∞ –ø–æ—Ö–∏–ª—ñ–π –ª–∞–≤—Ü—ñ", sets: "2√ó6", weight: "–°–í", type: "incline" },
                        { name: "–ú–∞—Ö–∏ –Ω–∞ —Å–µ—Ä–µ–¥–Ω—é –¥–µ–ª—å—Ç—É", sets: "3√ó8", weight: "‚Üó", type: "other" },
                        { name: "–ú–∞—Ö–∏ –Ω–∞ –∑–∞–¥–Ω—é –¥–µ–ª—å—Ç—É", sets: "3√ó8", weight: "‚Üó", type: "other" },
                        { name: "–ñ–∏–º –ª–µ–∂–∞—á–∏", sets: "5√ó5", weight: "–õ–í", type: "bench" }
                    ],
                    cooldown: [
                        "–†–æ–∑—Ç—è–∂–∫–∞ –º–æ—Å—Ç—É —Ç–∞ –ø–µ—Ä–µ–¥–Ω—å–æ—ó –ø–æ–≤–µ—Ä—Ö–Ω—ñ —Å—Ç–µ–≥–Ω–∞",
                        "–ó–∞—à–∞–≥—É–≤–∞–Ω–Ω—è —Ä—É–∫–∞–º–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É 3√ó6 –Ω–∞ —Ä—É–∫—É",
                        "–û–±–µ—Ä—Ç–∞–Ω–Ω—è —Ç—É–ª—É–±–∞ –∑ —É–ø–æ—Ä–æ–º 3√ó12 –Ω–∞ —Ä—É–∫—É"
                    ]
                }
            }
        };

        function calculateWeight(type, weightCategory, oneRM) {
            const coefBiceps = parseFloat(document.getElementById('coef_biceps').value) / 100;
            const coefIncline = parseFloat(document.getElementById('coef_incline').value) / 100;
            const coefOHP = parseFloat(document.getElementById('coef_ohp').value) / 100;
            const coefCloseGrip = parseFloat(document.getElementById('coef_close_grip').value) / 100;

            let exerciseRM = oneRM;

            if (type === 'biceps') {
                exerciseRM = oneRM * coefBiceps;
            } else if (type === 'incline') {
                exerciseRM = oneRM * coefIncline;
            } else if (type === 'ohp') {
                exerciseRM = oneRM * coefOHP;
            } else if (type === 'close_grip') {
                exerciseRM = oneRM * coefCloseGrip;
            } else if (type !== 'bench' && type !== 'bench_pyramid') {
                return null;
            }

            if (weightCategory === '‚Üó' || weightCategory === '–≤–ª–∞—Å–Ω–∞/–°–í' || weightCategory === '‚Üí') {
                return null;
            }

            const cleanCategory = weightCategory;
            
            if (!WEIGHT_RANGES[cleanCategory]) {
                return null;
            }

            const range = WEIGHT_RANGES[cleanCategory];
            const minWeight = roundToBarbell(exerciseRM * (range.min / 100));
            const maxWeight = roundToBarbell(exerciseRM * (range.max / 100));

            return {
                minWeight,
                maxWeight,
                category: cleanCategory,
                // Always show the original percentages from PDF
                minPercent: range.min,
                maxPercent: range.max
            };
        }

        function renderProgram() {
            const oneRM = parseFloat(document.getElementById('oneRepMax').value) || 80;
            const startDateValue = document.getElementById('startDate').value;
            const startDate = startDateValue ? new Date(startDateValue) : getNextMonday();
            const trainingDates = getTrainingDates(startDate);
            const content = document.getElementById('programContent');
            
            let html = '';

            const t = translations[currentLang];
            const weekNames = { week1: t.week1, week2: t.week2, week3: t.week3, week4: t.week4 };
            const dayLabels = t.dayLabels;
            const weekIndices = { week1: 0, week2: 1, week3: 2, week4: 3 };
            const dayIndices = { day1: 0, day2: 1, day3: 2 };

            for (const [weekKey, weekData] of Object.entries(program)) {
                const weekIdx = weekIndices[weekKey];
                html += `
                    <section class="week-section" id="${weekKey}">
                        <div class="week-header" onclick="toggleWeek('${weekKey}')">
                            <h2>${weekNames[weekKey]}</h2>
                            <span class="toggle-icon">‚ñº</span>
                        </div>
                        <div class="week-content">
                `;

                for (const [dayKey, dayData] of Object.entries(weekData)) {
                    const dayId = `${weekKey}_${dayKey}`;
                    const dayIdx = dayIndices[dayKey];
                    const dayDate = trainingDates[weekIdx][dayIdx];
                    const dateStr = formatDateDisplay(dayDate);
                    const dayLabel = dayLabels[dayIdx];
                    html += `
                        <div class="day-section" id="${dayId}">
                            <div class="day-header" onclick="toggleDay('${dayId}')">
                                <div class="day-number">${dayIdx + 1}</div>
                                <div class="day-title">${dayLabel}, ${dateStr}</div>
                                <span class="toggle-icon">‚ñº</span>
                            </div>
                            <div class="day-content">
                    `;

                    if (dayData.warmup?.length) {
                        html += `
                            <div class="block warmup">
                                <div class="block-header">${t.warmup}</div>
                                <ul class="warmup-list">
                                    ${dayData.warmup.map(item => `<li>${addVideoLink(getTranslatedText(item, 'warmup'), item)}</li>`).join('')}
                                </ul>
                            </div>
                        `;
                    }

                    if (dayData.exercises?.length) {
                        html += `
                            <div class="block exercises">
                                <div class="block-header">${t.exercises}</div>
                                <table class="exercise-table">
                                    <thead>
                                        <tr>
                                            <th class="col-num">#</th>
                                            <th class="col-name">${t.thExercise}</th>
                                            <th class="col-sets">${t.thSets}</th>
                                            <th class="col-weight">${t.thWeight}</th>
                                            <th class="col-result">${t.thResult}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                        `;

                        dayData.exercises.forEach((ex, idx) => {
                            const result = calculateWeight(ex.type, ex.weight, oneRM);
                            const showInput = ex.type === 'other' && !['‚Üó', '–≤–ª–∞—Å–Ω–∞/–°–í'].includes(ex.weight);
                            
                            let weightCell = '';
                            if (result) {
                                const weightDisplay = result.minWeight === result.maxWeight 
                                    ? `${result.minWeight}` 
                                    : `${result.minWeight}‚Äì${result.maxWeight}`;
                                const percentDisplay = result.minPercent === result.maxPercent
                                    ? `${result.minPercent}%`
                                    : `${result.minPercent}‚Äì${result.maxPercent}%`;
                                const categoryDisplay = currentLang === 'en' 
                                    ? { '–õ–í': 'LW', '–°–í': 'MW', '–í–í': 'HW' }[result.category] || result.category 
                                    : result.category;
                                weightCell = `
                                    <div class="weight-info">
                                        <span class="weight-value">${weightDisplay} ${t.unitKg}</span>
                                        <span class="weight-meta">(${categoryDisplay} ${percentDisplay})</span>
                                    </div>
                                `;
                            } else if (showInput) {
                                const placeholderWeight = currentLang === 'en' 
                                    ? { '–õ–í': 'LW', '–°–í': 'MW', '–í–í': 'HW' }[ex.weight] || ex.weight 
                                    : ex.weight;
                                weightCell = `<input type="text" class="user-weight-input" placeholder="${placeholderWeight}">`;
                            } else {
                                let displayWeight = ex.weight;
                                if (currentLang === 'en') {
                                    displayWeight = displayWeight
                                        .replace('–≤–ª–∞—Å–Ω–∞/–°–í', 'BW/MW')
                                        .replace('–õ–í', 'LW')
                                        .replace('–°–í', 'MW')
                                        .replace('–í–í', 'HW');
                                }
                                weightCell = `<span class="weight-empty">${displayWeight}</span>`;
                            }

                            const translatedName = getTranslatedText(ex.name, 'exercise');
                            const translatedSets = currentLang === 'en' ? ex.sets.replace('–ø–æ 1 –≤ –≥–æ—Ä—É –¥–æ –≤–∞–∂–∫–æ–≥–æ', 'singles up to heavy') : ex.sets;
                            
                            html += `
                                <tr>
                                    <td><div class="exercise-num">${idx + 1}</div></td>
                                    <td class="exercise-name">${translatedName}</td>
                                    <td class="sets-reps">${translatedSets}</td>
                                    <td>${weightCell}</td>
                                    <td><input type="text" class="result-input" placeholder="‚Äî"></td>
                                </tr>
                            `;
                        });

                        html += `
                                    </tbody>
                                </table>
                            </div>
                        `;
                    }

                    if (dayData.cooldown?.length) {
                        html += `
                            <div class="block cooldown">
                                <div class="block-header">${t.cooldown}</div>
                                <ul class="warmup-list">
                                    ${dayData.cooldown.map(item => `<li>${addVideoLink(getTranslatedText(item, 'warmup'), item)}</li>`).join('')}
                                </ul>
                            </div>
                        `;
                    }

                    html += `</div></div>`;
                }

                html += `</div></section>`;
            }

            content.innerHTML = html;
            loadToggleState();
        }

        async function savePDF() {
            const btn = document.getElementById('saveBtn');
            const overlay = document.getElementById('loadingOverlay');
            const isCompact = document.getElementById('compactPdf').checked;
            
            btn.disabled = true;
            overlay.classList.add('active');

            // Expand all sections for PDF
            document.querySelectorAll('.week-section, .day-section').forEach(s => s.classList.remove('collapsed'));

            const configSection = document.getElementById('configSection');
            const saveSection = document.getElementById('saveSection');
            const headerControls = document.querySelector('.header-controls');
            const mainContainer = document.getElementById('mainContainer');
            
            configSection.style.display = 'none';
            saveSection.style.display = 'none';
            headerControls.style.display = 'none';

            // Apply compact mode if selected
            if (isCompact) {
                mainContainer.classList.add('compact-pdf');
            }

            // Hide toggle icons for PDF
            document.querySelectorAll('.toggle-icon').forEach(el => el.style.display = 'none');

            const element = document.getElementById('mainContainer');
            const oneRM = document.getElementById('oneRepMax').value;
            
            const filePrefix = currentLang === 'uk' ? '–ñ–ò–ú_100–ö–ì' : 'BENCH_100KG';
            const kgLabel = currentLang === 'uk' ? '–∫–≥' : 'kg';
            const compactSuffix = currentLang === 'uk' ? '_–∫–æ–º–ø–∞–∫—Ç' : '_compact';
            const suffixFinal = isCompact ? compactSuffix : '';
            
            const opt = {
                margin: isCompact ? [5, 5, 5, 5] : [10, 8, 10, 8],
                filename: `${filePrefix}_1RM_${oneRM}${kgLabel}${suffixFinal}.pdf`,
                image: { type: 'jpeg', quality: 0.95 },
                html2canvas: { 
                    scale: 2, 
                    useCORS: true,
                    logging: false,
                    letterRendering: true
                },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' },
                pagebreak: { mode: ['avoid-all', 'css', 'legacy'], before: '.week-section' }
            };

            try {
                await html2pdf().set(opt).from(element).save();
            } catch (err) {
                console.error('PDF error:', err);
                const errorMsg = currentLang === 'uk' 
                    ? '–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó PDF. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.' 
                    : 'Error generating PDF. Please try again.';
                alert(errorMsg);
            }

            // Restore UI
            configSection.style.display = 'block';
            saveSection.style.display = 'block';
            headerControls.style.display = 'flex';
            mainContainer.classList.remove('compact-pdf');
            document.querySelectorAll('.toggle-icon').forEach(el => el.style.display = '');
            
            overlay.classList.remove('active');
            btn.disabled = false;
            
            // Restore collapsed state
            loadToggleState();
        }

        // Event listeners
        ['oneRepMax', 'coef_biceps', 'coef_incline', 'coef_ohp', 'coef_close_grip'].forEach(id => {
            document.getElementById(id).addEventListener('input', renderProgram);
        });
        document.getElementById('startDate').addEventListener('change', renderProgram);

        initStartDate();
        renderProgram();
    </script>
</body>
</html>
